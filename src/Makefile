# DO NOT EDIT! generated by ./autogen

SCC=gcc
CC=clang -O3 -Os -march=native -mtune=native -std=gnu99 -pedantic -Wall -Wextra -Wno-language-extension-token -fwrapv -DGETRANDOM

default: 512

all: default generic timecop

generic: testrandom.out

512: ctidh_511 csidh_511 csurf_512 csurf_513

ctidh_511: costpoly_ctidh_511.out bench_ctidh_511untuned test_ctidh_511.out \
bench_ctidh_511mults \
bench_ctidh_511cycles \
ubench_ctidh_511 umults_ctidh_511

csidh_511: costpoly_csidh_511.out bench_csidh_511untuned test_csidh_511.out \
bench_csidh_511mults \
bench_csidh_511cycles \
ubench_csidh_511 umults_csidh_511

csurf_512: costpoly_csurf_512.out bench_csurf_512untuned test_csurf_512.out \
bench_csurf_512mults \
bench_csurf_512cycles \
ubench_csurf_512 umults_csurf_512

csurf_513: costpoly_csurf_513.out bench_csurf_513untuned test_csurf_513.out \
bench_csurf_513mults \
bench_csurf_513cycles \
ubench_csurf_513 umults_csurf_513

# ----- benchmarks:

bench_ctidh_511cycles: bench.c \
libhighctidh_511.a libhighctidh_base.a libhighctidh_tunecycles511.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o bench_ctidh_511cycles bench.c \
		libhighctidh_511.a libhighctidh_base.a libhighctidh_tunecycles511.a libtest.a

bench_ctidh_511mults: bench.c \
libhighctidh_511.a libhighctidh_base.a libhighctidh_tunemults511.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o bench_ctidh_511mults bench.c \
	\libhighctidh_511.a libhighctidh_base.a libhighctidh_tunemults511.a libtest.a

bench_ctidh_511untuned: bench.c \
libhighctidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o bench_ctidh_511untuned bench.c \
		libhighctidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

bench_csidh_511cycles: bench.c \
libhighcsidh_511.a libhighctidh_base.a libhighctidh_tunecycles511.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o bench_csidh_511cycles bench.c \
		libhighcsidh_511.a libhighctidh_base.a libhighctidh_tunecycles511.a libtest.a

bench_csidh_511mults: bench.c \
libhighcsidh_511.a libhighctidh_base.a libhighctidh_tunemults511.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o bench_csidh_511mults bench.c \
	\libhighcsidh_511.a libhighctidh_base.a libhighctidh_tunemults511.a libtest.a

bench_csidh_511untuned: bench.c \
libhighcsidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o bench_csidh_511untuned bench.c \
		libhighcsidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

bench_csurf_512cycles: bench.c \
libhighcsurf_512.a libhighctidh_base.a libhighctidh_tunecycles512.a libtest.a
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o bench_csurf_512cycles bench.c \
		libhighcsurf_512.a libhighctidh_base.a libhighctidh_tunecycles512.a libtest.a

bench_csurf_512mults: bench.c \
libhighcsurf_512.a libhighctidh_base.a libhighctidh_tunemults512.a libtest.a
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o bench_csurf_512mults bench.c \
	\libhighcsurf_512.a libhighctidh_base.a libhighctidh_tunemults512.a libtest.a

bench_csurf_512untuned: bench.c \
libhighcsurf_512.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o bench_csurf_512untuned bench.c \
		libhighcsurf_512.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

bench_csurf_513cycles: bench.c \
libhighcsurf_513.a libhighctidh_base.a libhighctidh_tunecycles513.a libtest.a
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o bench_csurf_513cycles bench.c \
		libhighcsurf_513.a libhighctidh_base.a libhighctidh_tunecycles513.a libtest.a

bench_csurf_513mults: bench.c \
libhighcsurf_513.a libhighctidh_base.a libhighctidh_tunemults513.a libtest.a
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o bench_csurf_513mults bench.c \
	\libhighcsurf_513.a libhighctidh_base.a libhighctidh_tunemults513.a libtest.a

bench_csurf_513untuned: bench.c \
libhighcsurf_513.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o bench_csurf_513untuned bench.c \
		libhighcsurf_513.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

# ----- tests run automatically:

testrandom.out: testrandom
	[ -f testrandom.time ] && cat testrandom.time || :
	time ./testrandom > testrandom.out
	cmp testrandom.out testrandom.exp

testrandom: testrandom.o libhighctidh_base.a libtest.a
	$(CC) -o testrandom testrandom.o libhighctidh_base.a libtest.a

testrandom.o: testrandom.c random.h Makefile
	$(CC) -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c testrandom.c

test_ctidh_511: test_ctidh.c \
libhighctidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o test_ctidh_511 test_ctidh.c \
		libhighctidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

test_ctidh_511.out: test_ctidh_511 test_ctidh_511.exp
	[ -f test511.time ] && cat test511.time || :
	time ./test_ctidh_511 > test_ctidh_511.out
	cmp test_ctidh_511.out test_ctidh_511.exp

test_csidh_511: test_csidh.c \
libhighcsidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o test_csidh_511 test_csidh.c \
		libhighcsidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

test_csidh_511.out: test_csidh_511 test_csidh_511.exp
	[ -f test511.time ] && cat test511.time || :
	time ./test_csidh_511 > test_csidh_511.out
	cmp test_csidh_511.out test_csidh_511.exp

test_csurf_512: test_csurf.c \
libhighcsurf_512.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o test_csurf_512 test_csurf.c \
		libhighcsurf_512.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

test_csurf_512.out: test_csurf_512 test_csurf_512.exp
	[ -f test512.time ] && cat test512.time || :
	time ./test_csurf_512 > test_csurf_512.out
	cmp test_csurf_512.out test_csurf_512.exp

test_csurf_513: test_csurf.c \
libhighcsurf_513.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o test_csurf_513 test_csurf.c \
		libhighcsurf_513.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

test_csurf_513.out: test_csurf_513 test_csurf_513.exp
	[ -f test513.time ] && cat test513.time || :
	time ./test_csurf_513 > test_csurf_513.out
	cmp test_csurf_513.out test_csurf_513.exp

# ----- microbenchmarks (some run automatically):

costpoly_ctidh_511.out: costpoly_ctidh_511
	./costpoly_ctidh_511 > costpoly_ctidh_511.out
	cmp costpoly_ctidh_511.out costpoly.py

costpoly_ctidh_511: costpoly.c \
libhighctidh_511.a libhighctidh_base.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o costpoly_ctidh_511 costpoly.c \
		libhighctidh_511.a libhighctidh_base.a libtest.a

umults_ctidh_511: umults.c \
libhighctidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o umults_ctidh_511 umults.c \
		libhighctidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

ubench_ctidh_511: ubench.c \
libhighctidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o ubench_ctidh_511 ubench.c \
		libhighctidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

costpoly_csidh_511.out: costpoly_csidh_511
	./costpoly_csidh_511 > costpoly_csidh_511.out
	cmp costpoly_csidh_511.out costpoly.py

costpoly_csidh_511: costpoly.c \
libhighcsidh_511.a libhighctidh_base.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o costpoly_csidh_511 costpoly.c \
		libhighcsidh_511.a libhighctidh_base.a libtest.a

umults_csidh_511: umults.c \
libhighcsidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o umults_csidh_511 umults.c \
		libhighcsidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

ubench_csidh_511: ubench.c \
libhighcsidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o ubench_csidh_511 ubench.c \
		libhighcsidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

costpoly_csurf_512.out: costpoly_csurf_512
	./costpoly_csurf_512 > costpoly_csurf_512.out
	cmp costpoly_csurf_512.out costpoly.py

costpoly_csurf_512: costpoly.c \
libhighcsurf_512.a libhighctidh_base.a libtest.a
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o costpoly_csurf_512 costpoly.c \
		libhighcsurf_512.a libhighctidh_base.a libtest.a

umults_csurf_512: umults.c \
libhighcsurf_512.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o umults_csurf_512 umults.c \
		libhighcsurf_512.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

ubench_csurf_512: ubench.c \
libhighcsurf_512.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o ubench_csurf_512 ubench.c \
		libhighcsurf_512.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

costpoly_csurf_513.out: costpoly_csurf_513
	./costpoly_csurf_513 > costpoly_csurf_513.out
	cmp costpoly_csurf_513.out costpoly.py

costpoly_csurf_513: costpoly.c \
libhighcsurf_513.a libhighctidh_base.a libtest.a
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o costpoly_csurf_513 costpoly.c \
		libhighcsurf_513.a libhighctidh_base.a libtest.a

umults_csurf_513: umults.c \
libhighcsurf_513.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o umults_csurf_513 umults.c \
		libhighcsurf_513.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

ubench_csurf_513: ubench.c \
libhighcsurf_513.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o ubench_csurf_513 ubench.c \
		libhighcsurf_513.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

# ----- libhighctidh_tune{mults,cycles}:

libhighctidh_tunemults511.a: steps_tunemults511.o Makefile
	ar cr libhighctidh_tunemults511.a steps_tunemults511.o
	ranlib libhighctidh_tunemults511.a

steps_tunemults511.o: steps_tunemults511.c steps.h Makefile
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c steps_tunemults511.c

steps_tunemults511.c: tunemults511.out tune2c.py Makefile
	./tune2c.py < tunemults511.out > steps_tunemults511.c

tunemults511.out: tunemults511 Makefile
	[ -f tunemults511.time ] && cat tunemults511.time || :
	time ./tunemults511 > tunemults511.out

tunemults511: tunemults.c \
libhighctidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o tunemults511 tunemults.c \
		libhighctidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

libhighctidh_tunecycles511.a: steps_tunecycles511.o Makefile
	ar cr libhighctidh_tunecycles511.a steps_tunecycles511.o
	ranlib libhighctidh_tunecycles511.a

steps_tunecycles511.o: steps_tunecycles511.c steps.h Makefile
	$(CC) -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c steps_tunecycles511.c

steps_tunecycles511.c: tunecycles511.out tune2c.py Makefile
	./tune2c.py < tunecycles511.out > steps_tunecycles511.c

tunecycles511.out: tunecycles511 Makefile
	[ -f tunecycles511.time ] && cat tunecycles511.time || :
	time ./tunecycles511 > tunecycles511.out

tunecycles511: tunecycles.c \
libhighctidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o tunecycles511 tunecycles.c \
		libhighctidh_511.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

libhighctidh_tunemults512.a: steps_tunemults512.o Makefile
	ar cr libhighctidh_tunemults512.a steps_tunemults512.o
	ranlib libhighctidh_tunemults512.a

steps_tunemults512.o: steps_tunemults512.c steps.h Makefile
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c steps_tunemults512.c

steps_tunemults512.c: tunemults512.out tune2c.py Makefile
	./tune2c.py < tunemults512.out > steps_tunemults512.c

tunemults512.out: tunemults512 Makefile
	[ -f tunemults512.time ] && cat tunemults512.time || :
	time ./tunemults512 > tunemults512.out

tunemults512: tunemults.c \
libhighcsurf_512.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o tunemults512 tunemults.c \
		libhighcsurf_512.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

libhighctidh_tunecycles512.a: steps_tunecycles512.o Makefile
	ar cr libhighctidh_tunecycles512.a steps_tunecycles512.o
	ranlib libhighctidh_tunecycles512.a

steps_tunecycles512.o: steps_tunecycles512.c steps.h Makefile
	$(CC) -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c steps_tunecycles512.c

steps_tunecycles512.c: tunecycles512.out tune2c.py Makefile
	./tune2c.py < tunecycles512.out > steps_tunecycles512.c

tunecycles512.out: tunecycles512 Makefile
	[ -f tunecycles512.time ] && cat tunecycles512.time || :
	time ./tunecycles512 > tunecycles512.out

tunecycles512: tunecycles.c \
libhighcsurf_512.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o tunecycles512 tunecycles.c \
		libhighcsurf_512.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

libhighctidh_tunemults513.a: steps_tunemults513.o Makefile
	ar cr libhighctidh_tunemults513.a steps_tunemults513.o
	ranlib libhighctidh_tunemults513.a

steps_tunemults513.o: steps_tunemults513.c steps.h Makefile
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c steps_tunemults513.c

steps_tunemults513.c: tunemults513.out tune2c.py Makefile
	./tune2c.py < tunemults513.out > steps_tunemults513.c

tunemults513.out: tunemults513 Makefile
	[ -f tunemults513.time ] && cat tunemults513.time || :
	time ./tunemults513 > tunemults513.out

tunemults513: tunemults.c \
libhighcsurf_513.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o tunemults513 tunemults.c \
		libhighcsurf_513.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

libhighctidh_tunecycles513.a: steps_tunecycles513.o Makefile
	ar cr libhighctidh_tunecycles513.a steps_tunecycles513.o
	ranlib libhighctidh_tunecycles513.a

steps_tunecycles513.o: steps_tunecycles513.c steps.h Makefile
	$(CC) -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c steps_tunecycles513.c

steps_tunecycles513.c: tunecycles513.out tune2c.py Makefile
	./tune2c.py < tunecycles513.out > steps_tunecycles513.c

tunecycles513.out: tunecycles513 Makefile
	[ -f tunecycles513.time ] && cat tunecycles513.time || :
	time ./tunecycles513 > tunecycles513.out

tunecycles513: tunecycles.c \
libhighcsurf_513.a libhighctidh_base.a libhighctidh_untuned.a libtest.a
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o tunecycles513 tunecycles.c \
		libhighcsurf_513.a libhighctidh_base.a libhighctidh_untuned.a libtest.a

# ----- libhighctidh_511,csidh_511,csurf_512,csurf_513, size-dependent functions:

libhighctidh_511.a: uintbig_csidh_511.o fp_csidh_511.o  fp_csidh_inv_511.o fp_csidh_sqrt_511.o     primes_csidh_511.o poly511.o mont511.o elligator511.o skgen511.o validate511.o ctidh511.o Makefile
	ar cr libhighctidh_511.a uintbig_csidh_511.o fp_csidh_511.o fp_csidh_inv_511.o fp_csidh_sqrt_511.o     primes_csidh_511.o poly511.o mont511.o elligator511.o skgen511.o validate511.o ctidh511.o
	ranlib libhighctidh_511.a

libhighcsidh_511.a: uintbig_csidh_511.o fp_csidh_511.o fp_csidh_inv_511.o fp_csidh_sqrt_511.o     primes_csidh_511.o poly511.o mont511.o elligator511.o validate511.o csidh511.o Makefile
	ar cr libhighcsidh_511.a uintbig_csidh_511.o fp_csidh_511.o fp_csidh_511.o fp_csidh_inv_511.o     fp_csidh_sqrt_511.o primes_csidh_511.o  poly511.o mont511.o elligator511.o validate511.o csidh511.o
	ranlib libhighcsidh_511.a

ctidh511.o: ctidh.c csidh.h uintbig.h uintbig_namespace.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont.h proj.h mont_namespace.h primes.h primes_namespace.h csidh_namespace.h int64mask.h elligator.h elligator_namespace.h random.h random_namespace.h Makefile
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o ctidh511.o -c ctidh.c

csidh511.o: csidh.c csidh.h uintbig.h uintbig_namespace.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont.h proj.h mont_namespace.h primes.h primes_namespace.h csidh_namespace.h random.h random_namespace.h Makefile
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o csidh511.o -c csidh.c

validate511.o: validate.c csidh.h uintbig.h uintbig_namespace.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont.h proj.h mont_namespace.h primes.h primes_namespace.h csidh_namespace.h Makefile
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o validate511.o -c validate.c

skgen511.o: skgen.c csidh.h uintbig.h uintbig_namespace.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont.h proj.h mont_namespace.h primes.h primes_namespace.h csidh_namespace.h random.h random_namespace.h Makefile
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o skgen511.o -c skgen.c

elligator511.o: elligator.c crypto_declassify.h elligator.h proj.h fp.h uintbig.h uintbig_namespace.h fp_namespace.h randombytes.h elligator_namespace.h Makefile
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o elligator511.o -c elligator.c

mont511.o: mont.c steps.h steps_namespace.h mont.h uintbig.h uintbig_namespace.h proj.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont_namespace.h poly.h poly_namespace.h int64mask.h Makefile
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o mont511.o -c mont.c

poly511.o: poly.c mont.h uintbig.h uintbig_namespace.h proj.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont_namespace.h poly.h poly_namespace.h Makefile
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o poly511.o -c poly.c

fp_csidh_inv_511.o: fp_csidh_inv_511.c fp.h uintbig.h uintbig_namespace.h fp_namespace.h randombytes.h crypto_declassify.h Makefile
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c fp_csidh_inv_511.c

fp_csidh_sqrt_511.o: fp_csidh_sqrt_511.c fp.h uintbig.h uintbig_namespace.h fp_namespace.h randombytes.h crypto_declassify.h Makefile
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c fp_csidh_sqrt_511.c

primes_csidh_511.o: primes_csidh_511.c primes.h primes_namespace.h Makefile
	$(CC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c primes_csidh_511.c

libhighcsurf_512.a: uintbig_csurf_512.o fp_csurf_512.o fp_csurf_inv_512.o fp_csurf_sqrt_512.o       primes_csurf_512.o poly512.o mont512.o elligator512.o validate512.o csurf512.o Makefile
	ar cr libhighcsurf_512.a uintbig_csurf_512.o fp_csurf_512.o fp_csurf_inv_512.o fp_csurf_sqrt_512.o       primes_csurf_512.o  poly512.o mont512.o elligator512.o validate512.o csurf512.o
	ranlib libhighcsurf_512.a

csurf512.o: csurf.c csidh.h uintbig.h uintbig_namespace.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont.h proj.h mont_namespace.h primes.h primes_namespace.h csidh_namespace.h random.h random_namespace.h Makefile
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o csurf512.o -c csurf.c

validate512.o: validate.c csidh.h uintbig.h uintbig_namespace.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont.h proj.h mont_namespace.h primes.h primes_namespace.h csidh_namespace.h Makefile
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o validate512.o -c validate.c

skgen512.o: skgen.c csidh.h uintbig.h uintbig_namespace.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont.h proj.h mont_namespace.h primes.h primes_namespace.h csidh_namespace.h random.h random_namespace.h Makefile
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o skgen512.o -c skgen.c

elligator512.o: elligator.c crypto_declassify.h elligator.h proj.h fp.h uintbig.h uintbig_namespace.h fp_namespace.h randombytes.h elligator_namespace.h Makefile
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o elligator512.o -c elligator.c

mont512.o: mont.c steps.h steps_namespace.h mont.h uintbig.h uintbig_namespace.h proj.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont_namespace.h poly.h poly_namespace.h int64mask.h Makefile
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o mont512.o -c mont.c

poly512.o: poly.c mont.h uintbig.h uintbig_namespace.h proj.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont_namespace.h poly.h poly_namespace.h Makefile
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o poly512.o -c poly.c

fp_csurf_inv_512.o: fp_csurf_inv_512.c fp.h uintbig.h uintbig_namespace.h fp_namespace.h randombytes.h crypto_declassify.h Makefile
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c fp_csurf_inv_512.c

fp_csurf_sqrt_512.o: fp_csurf_sqrt_512.c fp.h uintbig.h uintbig_namespace.h fp_namespace.h randombytes.h crypto_declassify.h Makefile
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c fp_csurf_sqrt_512.c

primes_csurf_512.o: primes_csurf_512.c primes.h primes_namespace.h Makefile
	$(CC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c primes_csurf_512.c

libhighcsurf_513.a: uintbig_csurf_513.o fp_csurf_513.o fp_csurf_inv_513.o fp_csurf_sqrt_513.o       primes_csurf_513.o poly513.o mont513.o elligator513.o validate513.o csurf513.o Makefile
	ar cr libhighcsurf_513.a uintbig_csurf_513.o fp_csurf_513.o fp_csurf_inv_513.o fp_csurf_sqrt_513.o       primes_csurf_513.o  poly513.o mont513.o elligator513.o validate513.o csurf513.o
	ranlib libhighcsurf_513.a

csurf513.o: csurf.c csidh.h uintbig.h uintbig_namespace.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont.h proj.h mont_namespace.h primes.h primes_namespace.h csidh_namespace.h random.h random_namespace.h Makefile
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o csurf513.o -c csurf.c

validate513.o: validate.c csidh.h uintbig.h uintbig_namespace.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont.h proj.h mont_namespace.h primes.h primes_namespace.h csidh_namespace.h Makefile
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o validate513.o -c validate.c

skgen513.o: skgen.c csidh.h uintbig.h uintbig_namespace.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont.h proj.h mont_namespace.h primes.h primes_namespace.h csidh_namespace.h random.h random_namespace.h Makefile
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o skgen513.o -c skgen.c

elligator513.o: elligator.c crypto_declassify.h elligator.h proj.h fp.h uintbig.h uintbig_namespace.h fp_namespace.h randombytes.h elligator_namespace.h Makefile
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o elligator513.o -c elligator.c

mont513.o: mont.c steps.h steps_namespace.h mont.h uintbig.h uintbig_namespace.h proj.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont_namespace.h poly.h poly_namespace.h int64mask.h Makefile
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o mont513.o -c mont.c

poly513.o: poly.c mont.h uintbig.h uintbig_namespace.h proj.h fp.h fp_namespace.h randombytes.h crypto_declassify.h mont_namespace.h poly.h poly_namespace.h Makefile
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-o poly513.o -c poly.c

fp_csurf_inv_513.o: fp_csurf_inv_513.c fp.h uintbig.h uintbig_namespace.h fp_namespace.h randombytes.h crypto_declassify.h Makefile
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c fp_csurf_inv_513.c

fp_csurf_sqrt_513.o: fp_csurf_sqrt_513.c fp.h uintbig.h uintbig_namespace.h fp_namespace.h randombytes.h crypto_declassify.h Makefile
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c fp_csurf_sqrt_513.c

primes_csurf_513.o: primes_csurf_513.c primes.h primes_namespace.h Makefile
	$(CC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c primes_csurf_513.c

fp_csidh_511.o: fp_csidh_511.S fp.h fp_namespace.h uintbig.h uintbig_namespace.h Makefile
	$(SCC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c fp_csidh_511.S

uintbig_csidh_511.o: uintbig_csidh_511.S uintbig.h uintbig_namespace.h Makefile
	$(SCC) -DBITS=511 -D'NAMESPACEBITS(x)=highctidh_511_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c uintbig_csidh_511.S

fp_csurf_512.o: fp_csurf_512.S fp.h fp_namespace.h uintbig.h uintbig_namespace.h Makefile
	$(SCC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c fp_csurf_512.S

uintbig_csurf_512.o: uintbig_csurf_512.S uintbig.h uintbig_namespace.h Makefile
	$(SCC) -DBITS=512 -D'NAMESPACEBITS(x)=highctidh_512_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c uintbig_csurf_512.S

fp_csurf_513.o: fp_csurf_513.S fp.h fp_namespace.h uintbig.h uintbig_namespace.h Makefile
	$(SCC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c fp_csurf_513.S

uintbig_csurf_513.o: uintbig_csurf_513.S uintbig.h uintbig_namespace.h Makefile
	$(SCC) -DBITS=513 -D'NAMESPACEBITS(x)=highctidh_513_##x' -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c uintbig_csurf_513.S

# ----- libhighctidh_untuned, size-independent but normally replaced by tuned functions:

libhighctidh_untuned.a: steps_untuned.o Makefile
	ar cr libhighctidh_untuned.a steps_untuned.o
	ranlib libhighctidh_untuned.a

steps_untuned.o: steps_untuned.c steps.h Makefile
	$(CC) -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c steps_untuned.c

# ----- libhighctidh_base, size-independent functions:

libhighctidh_base.a: steps.o random.o Makefile
	ar cr libhighctidh_base.a steps.o random.o
	ranlib libhighctidh_base.a

steps.o: steps.c steps.h Makefile
	$(CC) -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c steps.c

random.o: random.c random.h int32_sort.h randombytes.h Makefile
	$(CC) -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c random.c

# ----- functions that libhighctidh wants from a core crypto library:

libtest.a: crypto_classify.o crypto_declassify.o randombytes.o int32_sort.o Makefile
	ar cr libtest.a crypto_classify.o crypto_declassify.o randombytes.o int32_sort.o
	ranlib libtest.a

randombytes.o: randombytes.c randombytes.h Makefile
	$(CC) -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c randombytes.c

int32_sort.o: int32_sort.c int32_sort.h Makefile
	$(CC) -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c int32_sort.c

crypto_declassify.o: crypto_declassify.c crypto_declassify.h Makefile
	$(CC) -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c crypto_declassify.c

crypto_classify.o: crypto_classify.c crypto_classify.h Makefile
	$(CC) -D'NAMESPACEGENERIC(x)=highctidh_##x' \
		-c crypto_classify.c
